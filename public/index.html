<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Conversation</title>

  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
</head>
<body>
  <section id="app">
    <section id="overlay" v-if="info">
      <p v-html="info"></p>
    </section>
    <section v-if="!info" id="chat">
      <section ref="bubbles" id="bubbles">
        <section v-for="(bubble, index) in bubbles" :key="index" class="bubble-container" :class="{ self: self(bubble.username) }">
          <section class="bubble" :class="{ self: self(bubble.username) }">
            <p class="message">{{ bubble.message.replace(/<\/?[^>]+(>|$)/g, '') }}</p>
            <p class="timestamp" :class="{ self: self(bubble.username) }">{{ date(bubble.timestamp) }}</p>
          </section>
        </section>
      </section>
      <textarea v-model="message" v-on:keydown.enter.prevent="if (message.trim()) send()" placeholder="Write a message..." id="textarea-message"></textarea>
      <button @click="if (message.trim()) send()" id="button-send">Send</button>
    </section>
  </section>
  
  <script src="chat.js"></script>
</body>
</html>